<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Generate MetaMask deeplinks for Home, Swap, Buy, and Predict Markets with pre-filled parameters.">
  <title>MetaMask Deeplink Generator</title>
  <link rel="icon" type="image/svg+xml" href="https://images.ctfassets.net/clixtyxoaeas/1ezuBGezqfIeifWdVtwU4c/d970d4cdf13b163efddddd5709164d2e/MetaMask-icon-Fox.svg">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Euclid+Circular+B:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

:root {
  --mm-orange: #F6851B;
  --mm-blue: #037DD6;
  --mm-blue-hover: #0260A4;
  --mm-green: #28A745;
  --mm-red: #D73A49;
  --mm-purple: #8B5CF6;
  --gradient-start: #667eea;
  --gradient-end: #764ba2;
}

html, body {
  margin: 0;
  padding: 0;
  font-family: 'Euclid Circular B', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  color: #ffffff;
  min-height: 100vh;
  background: linear-gradient(135deg, var(--gradient-start) 0%, var(--gradient-end) 100%);
  overflow-x: hidden;
}

/* Animated Background */
.bg-animation {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  z-index: 0;
  pointer-events: none;
}

.bg-animation span {
  position: absolute;
  display: block;
  width: 20px;
  height: 20px;
  background: rgba(255, 255, 255, 0.1);
  animation: float 25s infinite;
  border-radius: 50%;
}

.bg-animation span:nth-child(1) { left: 25%; animation-delay: 0s; }
.bg-animation span:nth-child(2) { left: 10%; animation-delay: 2s; animation-duration: 12s; }
.bg-animation span:nth-child(3) { left: 70%; animation-delay: 4s; }
.bg-animation span:nth-child(4) { left: 40%; animation-delay: 0s; animation-duration: 18s; }
.bg-animation span:nth-child(5) { left: 65%; animation-delay: 0s; }
.bg-animation span:nth-child(6) { left: 75%; animation-delay: 3s; }
.bg-animation span:nth-child(7) { left: 35%; animation-delay: 7s; }
.bg-animation span:nth-child(8) { left: 50%; animation-delay: 15s; animation-duration: 45s; }
.bg-animation span:nth-child(9) { left: 20%; animation-delay: 2s; animation-duration: 35s; }
.bg-animation span:nth-child(10) { left: 85%; animation-delay: 0s; animation-duration: 11s; }

@keyframes float {
  0% {
    transform: translateY(100vh) scale(0);
    opacity: 0;
  }
  50% {
    opacity: 1;
  }
  100% {
    transform: translateY(-100vh) scale(1);
    opacity: 0;
  }
}

/* Header */
.header {
  position: relative;
  z-index: 10;
  padding: 2rem 0;
  margin-bottom: 2rem;
  animation: fadeInDown 0.8s ease;
}

.header-content {
  max-width: 1600px;
  margin: 0 auto;
  padding: 0 24px;
  display: flex;
  align-items: center;
  gap: 16px;
  flex-wrap: wrap;
  justify-content: center;
  text-align: center;
}

.logo-img { 
  width: 64px; 
  height: 64px;
  animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

h1 {
  font-size: 2.5rem;
  font-weight: 700;
  margin: 0;
  color: #ffffff;
  text-shadow: 2px 2px 20px rgba(0, 0, 0, 0.2);
}

h2 {
  font-size: 1.5rem;
  font-weight: 600;
  margin: 0 0 1.5rem;
  color: #24272A;
}

/* Main Wrapper */
.wrap {
  position: relative;
  z-index: 10;
  max-width: 1600px;
  margin: 0 auto 3rem;
  padding: 0 24px;
}

/* Intro Section */
.intro {
  background: rgba(255, 255, 255, 0.98);
  border-radius: 20px;
  padding: 1.5rem 2rem;
  margin-bottom: 2rem;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  backdrop-filter: blur(10px);
  animation: fadeInUp 0.8s ease 0.2s both;
  transition: transform 0.3s ease;
  color: #24272A;
}

.intro:hover {
  transform: translateY(-3px);
}

.intro p {
  margin: 0;
  line-height: 1.7;
}

/* Disclaimer */
.disclaimer {
  background: rgba(255, 255, 255, 0.98);
  border-radius: 20px;
  padding: 2rem;
  margin-bottom: 2.5rem;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  animation: fadeInUp 0.8s ease 0.3s both;
  transition: transform 0.3s ease;
}

.disclaimer:hover {
  transform: translateY(-3px);
}

.disclaimer h3 {
  font-size: 1.3rem;
  margin: 0 0 1.2rem;
  font-weight: 600;
  color: #24272A;
}

.disclaimer ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.disclaimer li {
  padding: 12px 0;
  border-bottom: 1px solid #e2e8f0;
  font-size: 14px;
  color: #4a5568;
}

.disclaimer li:last-child { border-bottom: none; }

/* Warning Box */
.signing-warning {
  background: linear-gradient(135deg, #fee 0%, #fdd 100%);
  border: 3px solid var(--mm-red);
  border-radius: 16px;
  padding: 1.5rem;
  margin-bottom: 1.5rem;
  text-align: center;
  box-shadow: 0 8px 20px rgba(220, 53, 69, 0.2);
  animation: warningPulse 2s ease-in-out infinite;
}

@keyframes warningPulse {
  0%, 100% { box-shadow: 0 8px 20px rgba(220, 53, 69, 0.2); }
  50% { box-shadow: 0 8px 30px rgba(220, 53, 69, 0.4); }
}

.signing-warning-title {
  color: var(--mm-red);
  font-size: 1.2rem;
  font-weight: 700;
  margin: 0 0 0.8rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.signing-warning-text {
  color: #721c24;
  font-size: 1rem;
  margin: 0.5rem 0;
  font-weight: 500;
}

.signing-warning a {
  color: var(--mm-red);
  font-weight: 700;
  text-decoration: none;
  border-bottom: 2px solid var(--mm-red);
  transition: all 0.3s ease;
}

.signing-warning a:hover {
  opacity: 0.8;
  border-bottom-width: 3px;
}

/* Grid Layout */
.grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 24px;
  animation: fadeIn 0.8s ease 0.4s both;
}

@media (max-width: 1600px) {
  .grid { 
    grid-template-columns: repeat(2, 1fr);
    gap: 28px;
  }
}

@media (max-width: 768px) {
  .grid { 
    grid-template-columns: 1fr;
    gap: 24px;
  }
  
  h1 {
    font-size: 2rem;
  }
  
  .logo-img {
    width: 48px;
    height: 48px;
  }
}

/* Card Styling */
.card {
  background: rgba(255, 255, 255, 0.98);
  border-radius: 20px;
  padding: 2rem;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  backdrop-filter: blur(10px);
  transition: all 0.3s ease;
  animation: cardAppear 0.6s ease both;
}

.card:nth-child(1) { animation-delay: 0.5s; }
.card:nth-child(2) { animation-delay: 0.6s; }
.card:nth-child(3) { animation-delay: 0.7s; }
.card:nth-child(4) { animation-delay: 0.8s; }

@keyframes cardAppear {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.card:hover {
  transform: translateY(-5px);
  box-shadow: 0 25px 70px rgba(0, 0, 0, 0.4);
}

/* Form Elements */
label {
  display: block;
  margin: 1rem 0 0.6rem;
  color: #2d3748;
  font-weight: 600;
  font-size: 0.9rem;
  letter-spacing: 0.3px;
}

select, input[type="text"], input[type="number"], textarea {
  width: 100%;
  padding: 0.9rem 1.1rem;
  border-radius: 12px;
  border: 2px solid #e2e8f0;
  background: #f7fafc;
  color: #2d3748;
  font-size: 14px;
  font-family: inherit;
  transition: all 0.3s ease;
}

select:hover, input:hover, textarea:hover {
  border-color: #cbd5e0;
}

select:focus, input:focus, textarea:focus {
  outline: none;
  border-color: var(--mm-blue);
  background: #ffffff;
  box-shadow: 0 0 0 4px rgba(3, 125, 214, 0.1);
  transform: translateY(-2px);
}

textarea {
  resize: vertical;
  min-height: 80px;
  font-family: 'SF Mono', 'Monaco', 'Consolas', monospace;
}

input:disabled, textarea:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/* Input Rows */
.row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}

/* Currency Toggle */
.input-with-toggle {
  position: relative;
}

.currency-toggle {
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  background: var(--mm-blue);
  color: white;
  border: none;
  padding: 6px 12px;
  border-radius: 8px;
  font-size: 11px;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.2s ease;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.currency-toggle:hover {
  background: var(--mm-blue-hover);
  transform: translateY(-50%) scale(1.05);
}

.currency-toggle:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.conversion-info {
  font-size: 11px;
  color: #718096;
  margin-top: 6px;
  font-style: italic;
}

/* Buttons */
.btn {
  display: inline-flex;
  gap: 8px;
  align-items: center;
  justify-content: center;
  border: none;
  padding: 0.9rem 1.5rem;
  border-radius: 12px;
  cursor: pointer;
  font-weight: 600;
  font-size: 14px;
  font-family: inherit;
  transition: all 0.3s ease;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.btn:hover { 
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.25);
}

.btn:active {
  transform: translateY(0);
}

.btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none;
}

.btn-primary {
  background: linear-gradient(135deg, var(--mm-blue) 0%, var(--mm-blue-hover) 100%);
  color: white;
}

.btn-copy {
  background: linear-gradient(135deg, var(--mm-green) 0%, #218838 100%);
  color: white;
}

.btn-reset {
  background: linear-gradient(135deg, var(--mm-orange) 0%, #e67700 100%);
  color: white;
}

.btn-qr {
  background: linear-gradient(135deg, #24272A 0%, #1a1d1f 100%);
  color: white;
}

.btn-group {
  display: flex;
  gap: 10px;
  margin-top: 1.5rem;
  flex-wrap: wrap;
}

/* Output Box */
.output {
  background: #f7fafc;
  border: 2px dashed #cbd5e0;
  border-radius: 12px;
  padding: 1.2rem;
  min-height: 60px;
  word-break: break-all;
  font-family: 'SF Mono', 'Monaco', 'Consolas', monospace;
  font-size: 12px;
  color: #2d3748;
  margin-top: 1.2rem;
  transition: all 0.3s ease;
}

.output.has-content {
  border-style: solid;
  border-color: var(--mm-green);
  background: #ffffff;
  box-shadow: 0 4px 12px rgba(40, 167, 69, 0.15);
  animation: outputAppear 0.4s ease;
}

@keyframes outputAppear {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* Warning & Info Boxes */
.warn {
  color: var(--mm-orange);
  font-size: 12px;
  margin-top: 1rem;
  padding: 0.8rem 1rem;
  background: rgba(246, 133, 27, 0.1);
  border-radius: 10px;
  border-left: 4px solid var(--mm-orange);
}

.info {
  color: var(--mm-purple);
  font-size: 12px;
  margin-top: 1rem;
  padding: 0.8rem 1rem;
  background: rgba(139, 92, 246, 0.1);
  border-radius: 10px;
  border-left: 4px solid var(--mm-purple);
}

/* Footer */
.foot {
  margin-top: 1.2rem;
  padding-top: 1rem;
  border-top: 1px solid #e2e8f0;
  color: #718096;
  font-size: 12px;
}

code {
  background: #edf2f7;
  padding: 3px 8px;
  border-radius: 6px;
  font-family: 'SF Mono', 'Monaco', 'Consolas', monospace;
  font-size: 11px;
  color: #2d3748;
  border: 1px solid #e2e8f0;
}

/* Toast Notification */
.toast {
  position: fixed;
  bottom: 32px;
  right: 32px;
  padding: 1rem 1.5rem;
  border-radius: 12px;
  background: var(--mm-green);
  color: white;
  font-weight: 600;
  transform: translateX(400px);
  transition: transform 0.3s ease;
  z-index: 1000;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
}

.toast.show { 
  transform: translateX(0);
  animation: toastBounce 0.5s ease;
}

@keyframes toastBounce {
  0% { transform: translateX(400px); }
  60% { transform: translateX(-10px); }
  80% { transform: translateX(5px); }
  100% { transform: translateX(0); }
}

/* QR Code Section */
.qr-wrap {
  margin-top: 1.2rem;
  padding: 1.2rem;
  border: 2px solid #e2e8f0;
  border-radius: 12px;
  background: #f7fafc;
  display: none;
  animation: slideIn 0.4s ease;
}

.qr-wrap.show { display: block; }

@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.qr-row {
  display: flex;
  align-items: flex-start;
  gap: 16px;
  flex-wrap: wrap;
}

.qr-container {
  background: white;
  padding: 12px;
  border-radius: 12px;
  border: 2px solid #e2e8f0;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.qr-help {
  color: #718096;
  font-size: 12px;
  max-width: 320px;
  line-height: 1.6;
}

/* Loading Spinner */
.loading {
  display: inline-block;
  width: 16px;
  height: 16px;
  border: 2px solid #e2e8f0;
  border-top-color: var(--mm-blue);
  border-radius: 50%;
  animation: spin 0.6s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

/* Predict Results */
.predict-result {
  margin-top: 1rem;
  padding: 1rem;
  background: #f7fafc;
  border-radius: 10px;
  font-size: 13px;
  display: none;
  line-height: 1.8;
  color: #2d3748;
  border: 2px solid #e2e8f0;
}

.predict-result.show { 
  display: block;
  animation: slideIn 0.4s ease;
}

.predict-result strong {
  color: var(--mm-blue);
}

.divider {
  text-align: center;
  margin: 1rem 0;
  color: #718096;
  font-size: 13px;
  font-weight: 600;
}

/* Animations */
@keyframes fadeInDown {
  from {
    opacity: 0;
    transform: translateY(-30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}
  </style>
</head>

<body>
  <!-- Animated Background -->
  <div class="bg-animation">
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
    <span></span>
  </div>

  <header class="header">
    <div class="header-content">
      <img src="https://images.ctfassets.net/clixtyxoaeas/1ezuBGezqfIeifWdVtwU4c/d970d4cdf13b163efddddd5709164d2e/MetaMask-icon-Fox.svg" alt="MetaMask" class="logo-img">
      <h1>MetaMask Deeplink Generator</h1>
    </div>
  </header>

  <main class="wrap">
    <section class="intro">
      <p>Generate deeplinks for MetaMask Home, Swap, Buy, and Predict Markets. Select your parameters and click Generate. Supports EVM, Solana, Bitcoin, and Tron. <strong>Now with live USD conversion and mUSD support!</strong></p>
    </section>

    <section class="disclaimer">
      <div class="signing-warning">
        <div class="signing-warning-title">‚ö†Ô∏è IMPORTANT: DON'T FORGET TO SIGN YOUR DEEPLINK ‚ö†Ô∏è</div>
        <div class="signing-warning-text">
          All deeplinks must be signed using the MetaMask Deeplink Signer before use.
        </div>
        <div class="signing-warning-text">
          Visit: <a href="https://signer.link.metamask.consensys.io" target="_blank" rel="noopener noreferrer">https://signer.link.metamask.consensys.io</a>
        </div>
      </div>

      <h3>üìã Important Information</h3>
      <ul>
        <li><strong>Predict Markets:</strong> Uses Polymarket's Gamma API to fetch market IDs. Requires valid market slug or direct ID.</li>
        <li><strong>USD Conversion:</strong> Live prices from CoinGecko API. Click USD/Crypto toggle to switch input mode.</li>
        <li><strong>mUSD:</strong> MetaMask USD stablecoin - crypto amounts only (no USD conversion).</li>
      </ul>
    </section>

    <section class="grid">
      <!-- HOME CARD -->
      <article class="card">
        <h2>üè† Home</h2>

        <div class="btn-group">
          <button type="button" class="btn btn-primary" id="homeGenerateBtn">Generate</button>
          <button type="button" class="btn btn-copy" id="homeCopyBtn">Copy</button>
          <button type="button" class="btn btn-qr" id="homeQrBtn">QR</button>
          <button type="button" class="btn btn-reset" id="homeResetBtn">Reset</button>
        </div>

        <div class="output" id="homeOutput"></div>

        <div class="qr-wrap" id="homeQrWrap">
          <div class="qr-row">
            <div class="qr-container" id="homeQrContainer"></div>
            <div class="qr-help">Scan on mobile to open the deeplink. If MetaMask is not installed, you may be routed to a download page.</div>
          </div>
        </div>

        <div class="foot">Base: <code>https://link.metamask.io/home</code></div>
      </article>

      <!-- SWAP CARD -->
      <article class="card">
        <h2>üîÑ Swap</h2>

        <div class="row">
          <div>
            <label for="fromChainSelect">From Chain</label>
            <select id="fromChainSelect"></select>
          </div>
          <div>
            <label for="fromTokenSelect">From Token</label>
            <select id="fromTokenSelect"></select>
          </div>
        </div>

        <div class="row">
          <div>
            <label for="toChainSelect">To Chain</label>
            <select id="toChainSelect"></select>
          </div>
          <div>
            <label for="toTokenSelect">To Token</label>
            <select id="toTokenSelect"></select>
          </div>
        </div>

        <div>
          <label for="amountInput">Amount (optional)</label>
          <div class="input-with-toggle">
            <input type="number" id="amountInput" min="0" step="any" placeholder="e.g., 1.5">
            <button type="button" class="currency-toggle" id="swapCurrencyToggle">USD</button>
          </div>
          <div class="conversion-info" id="swapConversionInfo"></div>
        </div>

        <div>
          <label>Base Units (auto)</label>
          <input type="text" id="baseUnitsDisplay" readonly placeholder="Calculated">
        </div>

        <div class="btn-group">
          <button type="button" class="btn btn-primary" id="swapGenerateBtn">Generate</button>
          <button type="button" class="btn btn-copy" id="swapCopyBtn">Copy</button>
          <button type="button" class="btn btn-qr" id="swapQrBtn">QR</button>
          <button type="button" class="btn btn-reset" id="swapResetBtn">Reset</button>
        </div>

        <div class="output" id="swapOutput"></div>

        <div class="qr-wrap" id="swapQrWrap">
          <div class="qr-row">
            <div class="qr-container" id="swapQrContainer"></div>
            <div class="qr-help">If a given pair is not routable, MetaMask may show no route available. This generator still formats the deeplink parameters correctly.</div>
          </div>
        </div>

        <div class="warn">‚ö†Ô∏è Only verified token addresses included (where applicable). Cross chain routing depends on MetaMask support.</div>
        <div class="foot">Base: <code>https://link.metamask.io/swap</code></div>
      </article>

      <!-- BUY CARD -->
      <article class="card">
        <h2>üí≥ Buy</h2>

        <div>
          <label for="buyChainSelect">Chain</label>
          <select id="buyChainSelect"></select>
        </div>

        <div>
          <label for="buyTokenSelect">Token</label>
          <select id="buyTokenSelect"></select>
        </div>

        <div>
          <label for="buyAmountInput">Amount (optional)</label>
          <div class="input-with-toggle">
            <input type="number" id="buyAmountInput" min="0" step="any" placeholder="e.g., 5">
            <button type="button" class="currency-toggle" id="buyCurrencyToggle">USD</button>
          </div>
          <div class="conversion-info" id="buyConversionInfo"></div>
        </div>

        <div class="btn-group">
          <button type="button" class="btn btn-primary" id="buyGenerateBtn">Generate</button>
          <button type="button" class="btn btn-copy" id="buyCopyBtn">Copy</button>
          <button type="button" class="btn btn-qr" id="buyQrBtn">QR</button>
          <button type="button" class="btn btn-reset" id="buyResetBtn">Reset</button>
        </div>

        <div class="output" id="buyOutput"></div>

        <div class="qr-wrap" id="buyQrWrap">
          <div class="qr-row">
            <div class="qr-container" id="buyQrContainer"></div>
            <div class="qr-help">Use QR for quick handoff to mobile, especially when you are generating links on desktop.</div>
          </div>
        </div>

        <div class="foot">Base: <code>https://link.metamask.io/buy</code></div>
      </article>

      <!-- PREDICT CARD -->
      <article class="card">
        <h2>üîÆ Predict</h2>

        <div>
          <label for="predictUrlInput">Polymarket URL</label>
          <textarea id="predictUrlInput" placeholder="https://polymarket.com/event/will-the-supreme-court-rule-in-favor-of-trumps-tariffs"></textarea>
        </div>

        <div class="divider">
          <strong>‚Äî OR ‚Äî</strong>
        </div>

        <div>
          <label for="predictIdInput">Market ID (direct entry)</label>
          <input type="text" id="predictIdInput" placeholder="e.g., 67691">
        </div>

        <div class="predict-result" id="predictResult"></div>

        <div class="btn-group">
          <button type="button" class="btn btn-primary" id="predictGenerateBtn">Generate</button>
          <button type="button" class="btn btn-copy" id="predictCopyBtn">Copy</button>
          <button type="button" class="btn btn-qr" id="predictQrBtn">QR</button>
          <button type="button" class="btn btn-reset" id="predictResetBtn">Reset</button>
        </div>

        <div class="output" id="predictOutput"></div>

        <div class="qr-wrap" id="predictQrWrap">
          <div class="qr-row">
            <div class="qr-container" id="predictQrContainer"></div>
            <div class="qr-help">Links to specific prediction markets on Polymarket through MetaMask.</div>
          </div>
        </div>

        <div class="info">üí° Paste the full Polymarket URL or enter the market ID directly. The slug will be automatically extracted from the URL.</div>
        <div class="foot">Base: <code>https://link.metamask.io/predict?marketId=</code></div>
      </article>
    </section>
  </main>

  <div class="toast" id="toast"></div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

  <script>
    // ===== DATA =====
    var CHAINS = [
      // EVM
      { key: 'ethereum', label: 'Ethereum', type: 'evm', ns: 'eip155', chainId: '1', slip: 60 },
      { key: 'polygon', label: 'Polygon', type: 'evm', ns: 'eip155', chainId: '137', slip: 966 },
      { key: 'base', label: 'Base', type: 'evm', ns: 'eip155', chainId: '8453', slip: 60 },
      { key: 'arbitrum', label: 'Arbitrum', type: 'evm', ns: 'eip155', chainId: '42161', slip: 60 },
      { key: 'optimism', label: 'Optimism', type: 'evm', ns: 'eip155', chainId: '10', slip: 60 },
      { key: 'avalanche', label: 'Avalanche', type: 'evm', ns: 'eip155', chainId: '43114', slip: 9005 },
      { key: 'bsc', label: 'BNB Chain', type: 'evm', ns: 'eip155', chainId: '56', slip: 714 },
      { key: 'linea', label: 'Linea', type: 'evm', ns: 'eip155', chainId: '59144', slip: 60 },

      // Solana
      { key: 'solana', label: 'Solana', type: 'solana', ns: 'solana', chainId: '5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp', slip: 501 },

      // Bitcoin
      { key: 'bitcoin', label: 'Bitcoin', type: 'bitcoin', ns: 'bip122', chainId: '000000000019d6689c085ae165831e93', slip: 0 },

      // Tron
      { key: 'tron', label: 'Tron', type: 'tron', ns: 'tron', chainId: '728126428', slip: 195 }
    ];

    var TOKENS = {
  ethereum: [
    // Base Tokens
    { sym: 'ETH', type: 'slip44', addr: '60', dec: 18, coingeckoId: 'ethereum', group: 'Base' },
    { sym: 'mUSD', type: 'erc20', addr: '0xacA92E438df0B2401fF60dA7E4337B687a2435DA', dec: 6, coingeckoId: 'usd-coin', group: 'Base' },
    { sym: 'USDC', type: 'erc20', addr: '0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48', dec: 6, coingeckoId: 'usd-coin', group: 'Base' },
    { sym: 'USDT', type: 'erc20', addr: '0xdAC17F958D2ee523a2206206994597C13D831ec7', dec: 6, coingeckoId: 'tether', group: 'Base' },
    { sym: 'DAI', type: 'erc20', addr: '0x6B175474E89094C44Da98b954EedeAC495271d0F', dec: 18, coingeckoId: 'dai', group: 'Base' },
    { sym: 'WETH', type: 'erc20', addr: '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2', dec: 18, coingeckoId: 'weth', group: 'Base' },
    { sym: 'WBTC', type: 'erc20', addr: '0x2260FAC5E5542a773Aa44fBCfeDf7C193bc2C599', dec: 8, coingeckoId: 'wrapped-bitcoin', group: 'Base' },
    
    // Ondo Tokenized Stocks
    { sym: 'AAPLon', name: 'Apple', type: 'erc20', addr: '0x14c3abF95Cb9C93a8b82C1CdCB76D72Cb87b2d4c', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'ABNBon', name: 'Airbnb', type: 'erc20', addr: '0xb035c3d5083bdc80074F380aeBc9Fcb68aBa0A28', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'ABTon', name: 'Abbott', type: 'erc20', addr: '0x3859385363f7BB4Dfe42811cCF3F294FcD41dd1D', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'ACNon', name: 'Accenture', type: 'erc20', addr: '0xAbA9Ae731Aad63335C604E5f6E6A5db2e05f549d', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'ADBEon', name: 'Adobe', type: 'erc20', addr: '0x7042a8fFc7c7049684BfBc2fcb41b72380755a43', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'AMDon', name: 'AMD', type: 'erc20', addr: '0x0C1f3412A44Ff99E40bF14e06e5Ea321aE7B3938', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'AMZNon', name: 'Amazon', type: 'erc20', addr: '0xbb8774FB97436d23d74C1b882E8E9A69322cFD31', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'APOon', name: 'Apollo Global', type: 'erc20', addr: '0x4D21aFfD27183B07335935F81A5C26b6A5A15355', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'APPon', name: 'AppLovin', type: 'erc20', addr: '0xd5C5B2883735Fa9B658Dd52e2FCC8d7c0f1A42Ce', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'ARMon', name: 'Arm Holdings', type: 'erc20', addr: '0x5Bf1b2A808598C0eF4Af1673a5457d86fE6d7B3d', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'ASMLon', name: 'ASML Holding', type: 'erc20', addr: '0xE51bA774ebF6392c45Bf1d9E6b334d07992460d3', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'AVGOon', name: 'Broadcom', type: 'erc20', addr: '0x0d54D4279B9E8c54cD8547c2C75A8Ee81A0BcaE8', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'AXPon', name: 'American Express', type: 'erc20', addr: '0x2Bc7Ff0C5dA9F1a4A51F96e77C5b0F7165DC06d2', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'BABAon', name: 'Alibaba', type: 'erc20', addr: '0x41765F0FCddC276309195166C7A62AE522FA09ef', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'BAon', name: 'Boeing', type: 'erc20', addr: '0x57270D35A840BC5C094da6FBeCA033FB71eA6Ab0', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'BIDUon', name: 'Baidu', type: 'erc20', addr: '0x9d4C6AD12B55E4645b585209F90Cc26614061E91', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'BLKon', name: 'Blackrock', type: 'erc20', addr: '0x7a0F89c1606f71499950AA2590d547c3975B728E', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'CMGon', name: 'Chipotle', type: 'erc20', addr: '0x25018520138bbaB60684AD7983D4432E8B8E926B', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'COINon', name: 'Coinbase', type: 'erc20', addr: '0xF042cfa86cf1D598a75Bdb55c3507a1F39f9493b', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'COSTon', name: 'Costco', type: 'erc20', addr: '0x0c8276E4FeC072cf7854Be69c70F7773D1610857', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'CRCLon', name: 'Circle Internet', type: 'erc20', addr: '0x3632DEa96A953C11dac2f00b4A05a32CD1063fAE', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'CRMon', name: 'Salesforce', type: 'erc20', addr: '0x55720eF5b023Fd043AE5F8D2e526030207978950', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'CSCOon', name: 'Cisco Systems', type: 'erc20', addr: '0x980a1001ee94e54142b231f44C7CA7c9DF71FBe1', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'CVXon', name: 'Chevron', type: 'erc20', addr: '0x8F3E41b378ae010c46d255F36bFC1D303b52dceb', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'DASHon', name: 'DoorDash', type: 'erc20', addr: '0x241958c86c7744d15d5f6314BA1Ea4c81DDA2896', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'DISon', name: 'Disney', type: 'erc20', addr: '0xc3D93B45249E8E06cfeB01d25A96337E8893265d', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'FIGon', name: 'Figma', type: 'erc20', addr: '0x073E7a0669833d356fa88ca65CC6D454EFaAa3c5', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'FUTUon', name: 'Futu Holdings', type: 'erc20', addr: '0x5Ce215d9c37a195DF88e294a06B8396C296B4e15', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'GEon', name: 'General Electric', type: 'erc20', addr: '0xD904bCf89B7CedF5c89f9Df7e829191D695F847E', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'GMEon', name: 'GameStop', type: 'erc20', addr: '0x71d24Baeb0A033ec5F90FF65C4210545AF378D97', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'GOOGLon', name: 'Alphabet Class A', type: 'erc20', addr: '0xbA47214eDd2bb43099611b208f75E4b42FDcfEDc', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'GSon', name: 'Goldman Sachs', type: 'erc20', addr: '0xdB57d9C14e357Fc01E49035a808779Df41E9B4e2', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'HIMSon', name: 'Hims & Hers', type: 'erc20', addr: '0xCa468554e5C0423Ee858fe3942c9568C51FcAa79', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'HOODon', name: 'Robinhood', type: 'erc20', addr: '0x998f02A9E343EF6E3E6f28700d5A20F839fD74E6', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'IBMon', name: 'IBM', type: 'erc20', addr: '0x25d3f236B2d61656eebdeA86Ac6D42168e340011', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'INTCon', name: 'Intel', type: 'erc20', addr: '0xFdA09936DbD717368De0835bA441d9E62069d36f', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'INTUon', name: 'Intuit', type: 'erc20', addr: '0x6cc0afD51CE4Cb6920B775F3D6376Ab82b9A93Bb', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'JDon', name: 'JD.com', type: 'erc20', addr: '0xdeB6B89088cA9B7d7756087c8a0F7C6DF46f319C', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'JPMon', name: 'JPMorgan Chase', type: 'erc20', addr: '0x03C1EC4CA9DBb168E6Db0DeF827c085999CBffaF', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'KOon', name: 'Coca-Cola', type: 'erc20', addr: '0x74a03d741226f738098C35da8188E57acA50d146', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'LINon', name: 'Linde plc', type: 'erc20', addr: '0x01B19c68f8A9eE3a480dA788ba401cFAbdf19B93', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'LLYon', name: 'Eli Lilly', type: 'erc20', addr: '0xf192957AE52dB3eb088654403CC2eDeD014ae556', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'LMTon', name: 'Lockheed', type: 'erc20', addr: '0x691b126cF619707Ed5d16CaB1B27C000aa8De300', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'MAon', name: 'Mastercard', type: 'erc20', addr: '0xA29dC2102dfc2a0A4A5dCb84Af984315567c9858', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'MARAon', name: 'MARA Holdings', type: 'erc20', addr: '0x4604b0b581269843ac7a6b70A5FC019E7762e511', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'MCDon', name: "McDonald's", type: 'erc20', addr: '0x4C82c8cD9a218612DCe60b156B73A36705645e3b', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'MELIon', name: 'MercadoLibre', type: 'erc20', addr: '0x2816169A49953C548BfEb3948dCF05c4A0E4657D', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'METAon', name: 'Meta Platforms', type: 'erc20', addr: '0x59644165402b611b350645555B50Afb581C71EB2', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'MRVLon', name: 'Marvell Technology', type: 'erc20', addr: '0xF404E5f887dBd5508e16a1198fCDD5DE1A4296B8', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'MSFTon', name: 'Microsoft', type: 'erc20', addr: '0xB812837b81a3a6b81d7CD74CfB19A7f2784555E5', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'MSTRon', name: 'MicroStrategy', type: 'erc20', addr: '0xCabD955322dfbf94C084929ac5E9Eca3fEB5556F', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'MUon', name: 'Micron Technology', type: 'erc20', addr: '0x050362Ab1072Cb2Ce74d74770E22A3203Ad04ee5', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'NFLXon', name: 'Netflix', type: 'erc20', addr: '0x032deC3372F25C41EA8054B4987a7c4832CDB338', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'NKEon', name: 'Nike', type: 'erc20', addr: '0xD8e26FcC879b30cB0a0B543925a2B3500f074D81', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'NOWon', name: 'ServiceNow', type: 'erc20', addr: '0x8bCF9012f4b0c1C3D359eDb7133C294f82f80790', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'NVDAon', name: 'NVIDIA', type: 'erc20', addr: '0x2D1F7226Bd1F780AF6B9A49DCC0aE00E8Df4bDEE', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'NVOon', name: 'Novo Nordisk', type: 'erc20', addr: '0x28151F5888833D3d767C4d6945a0Ee50D1B193E3', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'ORCLon', name: 'Oracle', type: 'erc20', addr: '0x8a23C6BaadB88512b30475C83Df6A63881e33e1E', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'PANWon', name: 'Palo Alto Networks', type: 'erc20', addr: '0x34bfdFF25F0fdA6d3ad0c33F1e06c0D40bD68885', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'PBRon', name: 'Petrobras', type: 'erc20', addr: '0xD08DDb436e731f32455Fe302723eE0FD2E9E8706', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'PEPon', name: 'PepsiCo', type: 'erc20', addr: '0x3cE219D498D807317F840f4CB0f03FA27dd65046', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'PFEon', name: 'Pfizer', type: 'erc20', addr: '0x06954faa913fA14c28Eb1b2e459594F22f33f3dE', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'PGon', name: 'Procter & Gamble', type: 'erc20', addr: '0x339ce23a355ed6D513DD3e1462975C4eCD86823a', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'PLTRon', name: 'Palantir', type: 'erc20', addr: '0x0c666485b02F7A87d21AdD7AEb9F5e64975AA490', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'PYPLon', name: 'PayPal', type: 'erc20', addr: '0x4EFD92F372898B57F292De69fCe377dd7D912bDd', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'QBTSon', name: 'D-Wave Quantum', type: 'erc20', addr: '0x3807562a482b824c08a564dfefcc471806d3e00a', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'QCOMon', name: 'Qualcomm', type: 'erc20', addr: '0xE3419710c1f77D44B4DaB02316d3f048818C4E59', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'RDDTon', name: 'Reddit', type: 'erc20', addr: '0xA9431d354cFAD3c6B76E50f0e73b43D48Be80CD0', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'RIOTon', name: 'Riot Platforms', type: 'erc20', addr: '0x21deafD91116FCe9fE87C8f15Bde03f99a309b72', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'SBUXon', name: 'Starbucks', type: 'erc20', addr: '0xf15FbC1349ab99ABAd63db3f9A510BF413bE3BeF', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'SHOPon', name: 'Shopify', type: 'erc20', addr: '0x908266C1192628371Cff7AD2F5Eba4dE061a0ac5', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'SMCIon', name: 'Super Micro Computer', type: 'erc20', addr: '0x2ca12a3F9635fD69C21580def14F25C210cA9612', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'SNOWon', name: 'Snowflake', type: 'erc20', addr: '0x5D1a9a9B118fF19721e0111f094f2360b6Ef7A2f', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'SPGIon', name: 'S&P Global', type: 'erc20', addr: '0xbc843b147DB4C7E00721d76037b8b92e13AfE13f', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'SPOTon', name: 'Spotify', type: 'erc20', addr: '0x590F21186489cA1612f49a4B1ff5c66acD6796A9', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'TSLAon', name: 'Tesla', type: 'erc20', addr: '0xf6b1117ec07684D3958caD8BEb1b302bfD21103f', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'TSMon', name: 'Taiwan Semiconductor', type: 'erc20', addr: '0x3Cafdbfe682aec17d5acE2f97A2f3ab3dCf6a4A9', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'UBERon', name: 'Uber', type: 'erc20', addr: '0x5Bcd8195E3Ef58f677aeF9eBC276B5087c027050', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'UNHon', name: 'UnitedHealth', type: 'erc20', addr: '0x075756F3b6381a79633438fAA8964946bf40163d', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'Von', name: 'Visa', type: 'erc20', addr: '0xaC37c20C1d0E5285035e056101a64e263Ff94a41', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'WFCon', name: 'Wells Fargo', type: 'erc20', addr: '0x4AD2118Da8a65eaa81402A3d583FEF6eE76BDf3F', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'WMTon', name: 'Walmart', type: 'erc20', addr: '0x82106347dDbB23cE44Cf4cE4053Ef1adf8b9323B', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'XOMon', name: 'Exxon Mobil', type: 'erc20', addr: '0xf05ad9840924ea6f977ebccb3b1da87e31dcd0b4', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'AALon', name: 'American Airlines', type: 'erc20', addr: '0xbe8eb7b51a08f9d52bb6c8c7eca699f0f89bfc02', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'ABBVon', name: 'AbbVie', type: 'erc20', addr: '0x7c7378143a9c8839e0502e2178f058f46c6ea504', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'ACHRon', name: 'Archer Aviation', type: 'erc20', addr: '0x9cfa08002d606e638fe91941be725e1b970b84a6', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'ADIon', name: 'Analog Devices', type: 'erc20', addr: '0x2ddc2391cc89e3e716a938f089ae755174cfdf1f', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'AMATon', name: 'Applied Materials', type: 'erc20', addr: '0x6be935eadc71c49c414b1175985946ee40365c67', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'AMCon', name: 'AMC Entertainment', type: 'erc20', addr: '0x592643a667633bca51cb2387c98b6de6ce549a45', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'AMGNon', name: 'Amgen', type: 'erc20', addr: '0x1c5fa55eade69ae98571059332520f73733c2d82', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'ANETon', name: 'Arista Networks', type: 'erc20', addr: '0x20e113e9235df6a2a9bfc6f244c2ccc380c8f546', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'BACon', name: 'Bank of America', type: 'erc20', addr: '0x576e9ca70e3a040c00d8139b0665a2b7b7b64844', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'BBAIon', name: 'BigBear.ai', type: 'erc20', addr: '0x1b8d3e59b31981385c066ee0916ec964628ff1f9', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'BILIon', name: 'Bilibili', type: 'erc20', addr: '0x7e08ce07aca80cefe61ebbfa0cedfe5c7b07edb9', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'BLSHon', name: 'Bullish', type: 'erc20', addr: '0x334ccd8df4013bac99af8c5c61d3605b315302a0', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'BMNRon', name: 'BitMine Immersion', type: 'erc20', addr: '0x33483a58079b4225b10e57958ca28ad7b9cdbaf7', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'BTGon', name: 'B2Gold', type: 'erc20', addr: '0x8ac6ad49b3344024834f373f3ca491f22ceb952e', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'BZon', name: 'Kanzhun', type: 'erc20', addr: '0x858e985126543b5a066c4e8a5dab0249c1d683f7', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'CATon', name: 'Caterpillar', type: 'erc20', addr: '0xf719b02079e0faa5450392da2d3e11a1e5b0eadb', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'CEGon', name: 'Constellation Energy', type: 'erc20', addr: '0x060505527c83e8bfeb9b4ff08248b82e688800f1', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'CIFRon', name: 'Cipher Mining', type: 'erc20', addr: '0x24e5bc45d5b6cef6f38989ac33df587a3fc850cf', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'COFon', name: 'Capital One', type: 'erc20', addr: '0x3d07c3161f355cb9e5b524bef8d113c96e0263ab', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'Con', name: 'Citigroup', type: 'erc20', addr: '0xc46e7ef70d7cf8c17863a6b0b9be2af6a4c41abe', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'COPon', name: 'ConocoPhillips', type: 'erc20', addr: '0x8e6a5338eac4b6fe8d51a7653fad3b9da755eea6', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'CPNGon', name: 'Coupang', type: 'erc20', addr: '0xfa9f0bf8baa9a3d5e0a8e5c0aeaf186acabef63d', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'CRWDon', name: 'CrowdStrike', type: 'erc20', addr: '0xcac9aafb2cf51645ae1ab4fb1f35f07d42437f80', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'CVNAon', name: 'Carvana', type: 'erc20', addr: '0xfe4ec50e0413148021d2f50d114cc44de6ffbf23', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'DEon', name: 'Deere', type: 'erc20', addr: '0x32d7c413fd3477e86b8ec6b0bb8f3ac510eafaae', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'DNNon', name: 'Denison Mines', type: 'erc20', addr: '0x7aa59a63d1d0c435a08bc96e11bef2e95ab66c40', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'FIGRon', name: 'Figure Technology', type: 'erc20', addr: '0xc2dbfe026f17e7bbc17a9e41f9b8d69531887d47', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'Fon', name: 'Ford Motor', type: 'erc20', addr: '0xf72936fa8afc808c99eb76e620a98ddc6a7a53d1', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'GEMIon', name: 'Gemini Space Station', type: 'erc20', addr: '0xb51db25c920c16f2865c37011c3eec91db946b07', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'GRABon', name: 'Grab Holdings', type: 'erc20', addr: '0x1c174711f3fd63c4165d6f296b3eb19d17fde94a', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'GRNDon', name: 'Grindr', type: 'erc20', addr: '0xe5b26ba77e6a4d79a7c54a5296d81254269d9700', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'HDon', name: 'Home Depot', type: 'erc20', addr: '0x7dbd435aa4ecab5471cfcef4527a022fef0b7e1c', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'IRENon', name: 'IREN', type: 'erc20', addr: '0x0b59fdb1a233a7477ea14061004b9dd776e73cb3', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'ISRGon', name: 'Intuitive Surgical', type: 'erc20', addr: '0x2691b13fca1e02322685b9554b5ae0f5f3f05c55', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'JNJon', name: 'Johnson & Johnson', type: 'erc20', addr: '0xdd0e1e6162666a210905ffe8d368661b313c00e9', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'KLACon', name: 'KLA', type: 'erc20', addr: '0xa637ae510cb50e61236a89ac480b93b8c3bccc46', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'LIon', name: 'Li Auto', type: 'erc20', addr: '0xb6e362a39db703f0f7cf582c9fc043a51624e53d', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'LOWon', name: "Lowe's", type: 'erc20', addr: '0x84328d8b85019fdcecf4c82fbe076bf350fc0cab', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'LRCXon', name: 'Lam Research', type: 'erc20', addr: '0x21be23f5bf87a749670c088f6dee26760f1ab80f', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'MPon', name: 'MP Materials', type: 'erc20', addr: '0x75846a2b2eeee6575ac775f9984be54fd1d08189', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'MRKon', name: 'Merck', type: 'erc20', addr: '0xdc8a7db05ea704227d56f5d4a4b77a2d1bba29c0', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'MRNAon', name: 'Moderna', type: 'erc20', addr: '0xa2c1c0b4683a871187d4565eb63abf9aef5947ee', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'MTZon', name: 'MasTec', type: 'erc20', addr: '0x5cb95099a2c7e3c8187fbca6efe5ba222b5ba820', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'NEEon', name: 'NextEra Energy', type: 'erc20', addr: '0xf46ba88694cd7933ca28be84ee787ad5732e856b', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'NIOon', name: 'NIO', type: 'erc20', addr: '0xee2542f442a5ed8008e2fe3590e14f90db69f70d', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'NTESon', name: 'NetEase', type: 'erc20', addr: '0x3d1cf8692a6f2fc9048a9cc1a06abf77f3465f0a', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'OKLOon', name: 'Oklo', type: 'erc20', addr: '0xf0372e226553af4f343b44111a789f87a9fa427a', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'ONDSon', name: 'Ondas Holdings', type: 'erc20', addr: '0x818234860a647d480b9bbcc9a47a23889f2ec900', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'ONon', name: 'ON Semiconductor', type: 'erc20', addr: '0xa52b2d6ca1cd9b1e8b931645428380c340caef9a', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'OPENon', name: 'Opendoor', type: 'erc20', addr: '0xb22d83e228c4266075ec75c32acc3bc059b6f248', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'OPRAon', name: 'Opera', type: 'erc20', addr: '0xb40afd1d55ea61fc1a6fbe093b817b673c8e78d7', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'OSCRon', name: 'Oscar Health', type: 'erc20', addr: '0x244efb92f76a57da49b5f71045dce3e546e13106', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'OXYon', name: 'Occidental Petroleum', type: 'erc20', addr: '0xeedc48205852e9d83ea5ca92fa8656597788601f', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'PCGon', name: 'PG&E', type: 'erc20', addr: '0x193fdf644451cc394b28b9cec2f5d32e2b4de515', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'PDDon', name: 'PDD Holdings', type: 'erc20', addr: '0xcc40965d3621362c3ee1dd946ba98d6a708ea86b', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'PINSon', name: 'Pinterest', type: 'erc20', addr: '0xc017c622cd05698580e2decd0f97d4a17dab70f9', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'PLUGon', name: 'Plug Power', type: 'erc20', addr: '0xe7ee911172bdd557b9ab6be7701f86bbc8fd772e', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'RGTIon', name: 'Rigetti Computing', type: 'erc20', addr: '0xfdfdf5db2f4a72cb754ffa8896ea012dc2cc0f5e', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'RIVNon', name: 'Rivian Automotive', type: 'erc20', addr: '0x04d94914cd1d7ff749efedee764335777225b962', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'RTXon', name: 'RTX', type: 'erc20', addr: '0x67c5902f5210f62f37157cd9c735c693164c1378', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'SCHWon', name: 'Charles Schwab', type: 'erc20', addr: '0xe737f948bdfe3beae9423292853ec0579173cebb', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'SBETon', name: 'SharpLink Gaming', type: 'erc20', addr: '0xfDb46864A7C476F0914c5E82CdED3364a9F56F8a', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'SNAPon', name: 'Snap', type: 'erc20', addr: '0xb2924278cc92e60db9b673d6a311d7a331dd703d', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'SOFIon', name: 'SoFi Technologies', type: 'erc20', addr: '0x9f2e3eb0160117c56b07652fe66a08a48b5bd7b5', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'SOon', name: 'Southern', type: 'erc20', addr: '0x99aa107e55250a9fe52bb4b5541a59239eb6d974', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'SOUNon', name: 'SoundHound AI', type: 'erc20', addr: '0x966db065199a3edea2228c6e5eb6ac49ff251acc', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'TCOMon', name: 'Trip.com Group', type: 'erc20', addr: '0x398f7f759380f3d309b9fc0e6cb3d36e0d67818d', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'TLNon', name: 'Talen Energy', type: 'erc20', addr: '0xc80c91bc6215e1333ea98314b8671d6e26c58470', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'TMOon', name: 'Thermo Fisher', type: 'erc20', addr: '0x60808f2a0d035e16f57e9043842bd1bfbda24fa2', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'TMUSon', name: 'T-Mobile US', type: 'erc20', addr: '0xdeb3c23f93349229823a006657cfe1a6552b6340', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'Ton', name: 'AT&T', type: 'erc20', addr: '0x3361a73262199873b74d6835760a59b8817fa592', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'TXNon', name: 'Texas Instruments', type: 'erc20', addr: '0x58fc9d573ea773ef9a25c3de66f990b87ee5f50e', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'VRTon', name: 'Vertiv', type: 'erc20', addr: '0x0752163d221d3d5d4b6e98bd616b22bd2b453964', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'VSTon', name: 'Vistra', type: 'erc20', addr: '0xf1573edddb75bf7ce165f142a17ed6b5e7f5aa13', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'VZon', name: 'Verizon', type: 'erc20', addr: '0x0e3d889d5b857c3e6eb361b9c9ae35bb7ddbd254', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'WULFon', name: 'Terawulf', type: 'erc20', addr: '0x110cae53912c2ed9bf279cd70b3b699e26c79e58', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    { sym: 'XYZon', name: 'Block', type: 'erc20', addr: '0x6cc41275ef02b4eeccc04fc4424849a96f3272aa', dec: 18, coingeckoId: null, group: 'Ondo Stocks' },
    
    // Ondo ETFs
    { sym: 'AGGon', name: 'iShares Core US Aggregate Bond', type: 'erc20', addr: '0xfF7CF16aA2fFc463b996DB2f7B7cf0130336899D', dec: 18, coingeckoId: null, group: 'Ondo ETFs' },
    { sym: 'EEMon', name: 'iShares MSCI Emerging Markets', type: 'erc20', addr: '0x77A1a02e4a888ADA8620b93C30dE8a41E621126c', dec: 18, coingeckoId: null, group: 'Ondo ETFs' },
    { sym: 'EFAon', name: 'iShares MSCI EAFE', type: 'erc20', addr: '0x4111b60bc87F2Bd1e81E783E271D7F0ec6EE088B', dec: 18, coingeckoId: null, group: 'Ondo ETFs' },
    { sym: 'EQIXon', name: 'Equinix', type: 'erc20', addr: '0x73d2ccEE12C120E7DA265a2dE9d9f952a0101b4f', dec: 18, coingeckoId: null, group: 'Ondo ETFs' },
    { sym: 'HYGon', name: 'iBoxx $ High Yield Corporate Bond', type: 'erc20', addr: '0xeD3618Bb8778F8eBBe2f241Da532227591771D04', dec: 18, coingeckoId: null, group: 'Ondo ETFs' },
    { sym: 'IAUon', name: 'iShares Gold Trust', type: 'erc20', addr: '0x4f0CA3df1c2e6b943cf82E649d576ffe7B2fABCF', dec: 18, coingeckoId: null, group: 'Ondo ETFs' },
    { sym: 'IEFAon', name: 'iShares Core MSCI EAFE', type: 'erc20', addr: '0xFEFf7a377A86462F5a2A872009722C154707F09e', dec: 18, coingeckoId: null, group: 'Ondo ETFs' },
    { sym: 'IEMGon', name: 'iShares Core MSCI Emerging Markets', type: 'erc20', addr: '0xcDD60D15125bf3362b6838D2506b0Fa33bc1a515', dec: 18, coingeckoId: null, group: 'Ondo ETFs' },
    { sym: 'IJHon', name: 'iShares Core S&P MidCap', type: 'erc20', addr: '0xFd50Fc4E3686a8DA814c5C3D6121d8aB98a537F0', dec: 18, coingeckoId: null, group: 'Ondo ETFs' },
    { sym: 'ITOTon', name: 'iShares Core S&P Total US Stock Market', type: 'erc20', addr: '0x0692481C369E2BDc728A69ae31b848343a4567Be', dec: 18, coingeckoId: null, group: 'Ondo ETFs' },
    { sym: 'IVVon', name: 'iShares Core S&P 500', type: 'erc20', addr: '0x62cA254a363dc3c748e7E955c20447aB5bF06fF7', dec: 18, coingeckoId: null, group: 'Ondo ETFs' },
    { sym: 'IWFon', name: 'iShares Russell 1000 Growth', type: 'erc20', addr: '0x8d05432C2786e3F93f1a9A62b9572DBf54f3ea06', dec: 18, coingeckoId: null, group: 'Ondo ETFs' },
    { sym: 'IWMon', name: 'iShares Russell 2000', type: 'erc20', addr: '0x070D79021dD7e841123cB0CF554993bF683c511D', dec: 18, coingeckoId: null, group: 'Ondo ETFs' },
    { sym: 'IWNon', name: 'iShares Russell 2000 Value', type: 'erc20', addr: '0x9DCf7f739B8C0270E2FC0Cc8D0DaBe355a150dBa', dec: 18, coingeckoId: null, group: 'Ondo ETFs' },
    { sym: 'QQQon', name: 'Invesco QQQ', type: 'erc20', addr: '0x0e397938C1Aa0680954093495B70A9F5e2249aBa', dec: 18, coingeckoId: null, group: 'Ondo ETFs' },
    { sym: 'SPYon', name: 'SPDR S&P 500', type: 'erc20', addr: '0xFeDC5f4a6c38211c1338aa411018DFAf26612c08', dec: 18, coingeckoId: null, group: 'Ondo ETFs' },
    { sym: 'TIPon', name: 'iShares TIPS Bond', type: 'erc20', addr: '0x2Df38cA485D01fC15e4FD85847ed26b7EF871c1c', dec: 18, coingeckoId: null, group: 'Ondo ETFs' },
    { sym: 'TLTon', name: 'iShares 20+ Year Treasury Bond', type: 'erc20', addr: '0x992651BFeB9A0DCC4457610E284ba66D86489d4d', dec: 18, coingeckoId: null, group: 'Ondo ETFs' },
    { sym: 'VTIon', name: 'Vanguard Total Stock Market', type: 'erc20', addr: '0x57b392146848c6321bb2a3d4358df1bdeacdc62a', dec: 18, coingeckoId: null, group: 'Ondo ETFs' },
    { sym: 'VTVon', name: 'Vanguard Value', type: 'erc20', addr: '0x84e8f1b9b40dd1832925702459d12ffb14d97bf3', dec: 18, coingeckoId: null, group: 'Ondo ETFs' },
    { sym: 'BINCon', name: 'iShares Flexible Income Active', type: 'erc20', addr: '0x88703c1e71f44a2d329c99e8e112f7a4e7dd6312', dec: 18, coingeckoId: null, group: 'Ondo ETFs' },
    { sym: 'CLOAon', name: 'iShares AAA CLO Active', type: 'erc20', addr: '0x8cefd49b703de9c0486d9bf6cb559f0895268ee8', dec: 18, coingeckoId: null, group: 'Ondo ETFs' },
    { sym: 'CLOIon', name: 'VanEck CLO', type: 'erc20', addr: '0xe8b09e8175aecb35a171fa059647434fe47f114c', dec: 18, coingeckoId: null, group: 'Ondo ETFs' },
    { sym: 'DBCon', name: 'Invesco DB Commodity Index Tracking', type: 'erc20', addr: '0x20224080ad516769723c9a4a18325fc4e8c9ab5d', dec: 18, coingeckoId: null, group: 'Ondo ETFs' },
    { sym: 'DGRWon', name: 'WisdomTree US Quality Dividend Growth', type: 'erc20', addr: '0x81eb954936a7062d1758fc0e6e3b88d42d9c361c', dec: 18, coingeckoId: null, group: 'Ondo ETFs' },
    { sym: 'FTGCon', name: 'First Trust Global Tactical Commodity Strategy', type: 'erc20', addr: '0xacf3fecaa787f268351a86409c3bd3b96ef924fb', dec: 18, coingeckoId: null, group: 'Ondo ETFs' },
    { sym: 'GLDon', name: 'SPDR Gold Shares', type: 'erc20', addr: '0x423d42e505e64f99b6e277eb7ed324cc5606f139', dec: 18, coingeckoId: null, group: 'Ondo ETFs' },
    { sym: 'JAAAon', name: 'Janus Henderson AAA CLO', type: 'erc20', addr: '0x219a1b27baa08d72fac836665a3b752f3c9acbbc', dec: 18, coingeckoId: null, group: 'Ondo ETFs' },
    { sym: 'COPXon', name: 'Global X Copper Miners', type: 'erc20', addr: '0x423a63dfe8d82cd9c6568c92210aa537d8ef6885', dec: 18, coingeckoId: null, group: 'Ondo ETFs' },
    { sym: 'NIKLon', name: 'Sprott Nickel Miners', type: 'erc20', addr: '0xbf54eb503bb350583d11f4348086dc3608fa245c', dec: 18, coingeckoId: null, group: 'Ondo ETFs' },
    { sym: 'PALLon', name: 'abrdn Physical Palladium Shares', type: 'erc20', addr: '0x0ce36d199bd6851788e03392568849394cbde722', dec: 18, coingeckoId: null, group: 'Ondo ETFs' },
    { sym: 'PDBCon', name: 'Invesco Optimum Yld Dvsfd Cmd Str No K-1', type: 'erc20', addr: '0x46c0a02a877c1412cb32b57028b2f771c0364a7e', dec: 18, coingeckoId: null, group: 'Ondo ETFs' },
    { sym: 'PSQon', name: 'ProShares Short QQQ', type: 'erc20', addr: '0x9ebd34d99cc3a45b39cafc14ad7994263fa2be56', dec: 18, coingeckoId: null, group: 'Ondo ETFs' },
    { sym: 'REMXon', name: 'VanEck Rare Earth and Strategic Metals', type: 'erc20', addr: '0x1140043f02d8ee34b10eae2e32ae921cda1459ee', dec: 18, coingeckoId: null, group: 'Ondo ETFs' },
    { sym: 'SGOVon', name: 'iShares 0-3 Month Treasury Bond', type: 'erc20', addr: '0x8de5d49725550f7b318b2fa0f1b1f118e98e8d0f', dec: 18, coingeckoId: null, group: 'Ondo ETFs' },
    { sym: 'SLVon', name: 'iShares Silver Trust', type: 'erc20', addr: '0xF3e4872e6a4cF365888D93b6146a2bAA7348F1A4', dec: 18, coingeckoId: null, group: 'Ondo ETFs' },
    { sym: 'SQQQon', name: 'ProShares UltraPro Short QQQ', type: 'erc20', addr: '0x0a00c19246fc41b2524d56c87ec44ce8b30ba0f8', dec: 18, coingeckoId: null, group: 'Ondo ETFs' },
    { sym: 'TQQQon', name: 'ProShares UltraPro QQQ', type: 'erc20', addr: '0xa45cd7ac9865b9539166ebaf2abc362df4736580', dec: 18, coingeckoId: null, group: 'Ondo ETFs' },
    { sym: 'USFRon', name: 'WisdomTree Floating Rate Treasury', type: 'erc20', addr: '0xfb82561a955bf59b9263301126af490d3799e231', dec: 18, coingeckoId: null, group: 'Ondo ETFs' },
    { sym: 'USOon', name: 'United States Oil Fund', type: 'erc20', addr: '0x1f5fc5c3c8b0f15c7e21af623936ff2b210b6415', dec: 18, coingeckoId: null, group: 'Ondo ETFs' },
    
    // Ondo Currency
    { sym: 'USDon', name: 'Ondo U.S. Dollar Token', type: 'erc20', addr: '0xAcE8E719899F6E91831B18AE746C9A965c2119F1', dec: 18, coingeckoId: null, group: 'Ondo Currency' }
  ],
      polygon: [
        { sym: 'POL', type: 'slip44', addr: '966', dec: 18, coingeckoId: 'matic-network' },
        { sym: 'USDC', type: 'erc20', addr: '0x3c499c542cEF5E3811e1192ce70d8cC03d5c3359', dec: 6, coingeckoId: 'usd-coin' },
        { sym: 'USDT', type: 'erc20', addr: '0xc2132D05D31c914a87C6611C10748AEb04B58e8F', dec: 6, coingeckoId: 'tether' },
        { sym: 'WETH', type: 'erc20', addr: '0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619', dec: 18, coingeckoId: 'weth' }
      ],
      base: [
        { sym: 'ETH', type: 'slip44', addr: '60', dec: 18, coingeckoId: 'ethereum' },
        { sym: 'USDC', type: 'erc20', addr: '0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913', dec: 6, coingeckoId: 'usd-coin' }
      ],
      arbitrum: [
        { sym: 'ETH', type: 'slip44', addr: '60', dec: 18, coingeckoId: 'ethereum' },
        { sym: 'USDC', type: 'erc20', addr: '0xAf88d065e77c8cC2239327C5EDb3A432268e5831', dec: 6, coingeckoId: 'usd-coin' },
        { sym: 'ARB', type: 'erc20', addr: '0x912CE59144191C1204E64559FE8253a0e49E6548', dec: 18, coingeckoId: 'arbitrum' }
      ],
      optimism: [
        { sym: 'ETH', type: 'slip44', addr: '60', dec: 18, coingeckoId: 'ethereum' },
        { sym: 'USDC', type: 'erc20', addr: '0x0b2c639c533813f4aa9d7837caf62653d097ff85', dec: 6, coingeckoId: 'usd-coin' },
        { sym: 'OP', type: 'erc20', addr: '0x4200000000000000000000000000000000000042', dec: 18, coingeckoId: 'optimism' }
      ],
      avalanche: [
        { sym: 'AVAX', type: 'slip44', addr: '9005', dec: 18, coingeckoId: 'avalanche-2' },
        { sym: 'USDC', type: 'erc20', addr: '0xB97EF9Ef8734C71904D8002F8b6Bc66Dd9c48a6E', dec: 6, coingeckoId: 'usd-coin' }
      ],
      bsc: [
        { sym: 'BNB', type: 'slip44', addr: '714', dec: 18, coingeckoId: 'binancecoin' },
        { sym: 'USDT', type: 'erc20', addr: '0x55d398326f99059fF775485246999027B3197955', dec: 18, coingeckoId: 'tether' }
      ],
      linea: [
        { sym: 'ETH', type: 'slip44', addr: '60', dec: 18, coingeckoId: 'ethereum' },
        { sym: 'USDC', type: 'erc20', addr: '0x176211869cA2b568f2A7D4EE941E073a821EE1ff', dec: 6, coingeckoId: 'usd-coin' }
      ],
      solana: [
        { sym: 'SOL', type: 'slip44', addr: '501', dec: 9, coingeckoId: 'solana' },
        { sym: 'USDC', type: 'spl', addr: 'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v', dec: 6, coingeckoId: 'usd-coin' },
        { sym: 'USDT', type: 'spl', addr: 'Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB', dec: 6, coingeckoId: 'tether' }
      ],
      bitcoin: [
        { sym: 'BTC', type: 'slip44', addr: '0', dec: 8, coingeckoId: 'bitcoin' }
      ],
      tron: [
        { sym: 'TRX', type: 'slip44', addr: '195', dec: 6, coingeckoId: 'tron' },
        { sym: 'USDT', type: 'trc20', addr: 'TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t', dec: 6, coingeckoId: 'tether' },
        { sym: 'USDC', type: 'trc20', addr: 'TEkxiTehnzSmSe2XqrBj4w32RUN966rdz8', dec: 6, coingeckoId: 'usd-coin' }
      ]
    };

    // Price cache
    var priceCache = {};
    var cacheTimeout = 60000; // 1 minute

    // ===== HELPERS =====
    function getEl(id) { return document.getElementById(id); }

    function showToast(msg) {
      var toast = getEl('toast');
      toast.textContent = msg;
      toast.classList.add('show');
      setTimeout(function() { toast.classList.remove('show'); }, 2500);
    }

    function copyText(text) {
      if (!text) { showToast('Nothing to copy!'); return; }
      if (navigator.clipboard) {
        navigator.clipboard.writeText(text).then(function() { showToast('Copied!'); })
          .catch(function() { showToast('Copy failed'); });
      } else {
        var ta = document.createElement('textarea');
        ta.value = text;
        ta.style.position = 'fixed';
        ta.style.opacity = '0';
        document.body.appendChild(ta);
        ta.select();
        try { document.execCommand('copy'); showToast('Copied!'); }
        catch (e) { showToast('Copy failed'); }
        document.body.removeChild(ta);
      }
    }

    function toBaseUnits(amount, decimals) {
      if (!amount || isNaN(parseFloat(amount))) return '';
      var num = parseFloat(amount);
      if (num < 0) return '';

      if (String(amount).toLowerCase().indexOf('e') !== -1) return '';

      var parts = String(amount).split('.');
      var intPart = parts[0] || '0';
      var fracPart = parts[1] || '';
      fracPart = (fracPart + '0'.repeat(decimals)).slice(0, decimals);

      var result = (intPart.replace(/\D/g, '') + fracPart.replace(/\D/g, '')).replace(/^0+/, '');
      return result || '0';
    }

    function getChain(key) {
      for (var i = 0; i < CHAINS.length; i++) {
        if (CHAINS[i].key === key) return CHAINS[i];
      }
      return null;
    }

    function populateChains(selectEl) {
      selectEl.innerHTML = '';
      for (var i = 0; i < CHAINS.length; i++) {
        var opt = document.createElement('option');
        opt.value = CHAINS[i].key;
        opt.textContent = CHAINS[i].label;
        selectEl.appendChild(opt);
      }
    }

    function populateTokens(selectEl, chainKey) {
  selectEl.innerHTML = '';
  var tokens = TOKENS[chainKey] || [];
  
  if (tokens.length === 0) {
    var opt = document.createElement('option');
    opt.value = '';
    opt.textContent = '(none)';
    selectEl.appendChild(opt);
    return;
  }
  
  // Group tokens
  var groups = {};
  for (var i = 0; i < tokens.length; i++) {
    var group = tokens[i].group || 'Other';
    if (!groups[group]) {
      groups[group] = [];
    }
    groups[group].push({ index: i, token: tokens[i] });
  }
  
  // Sort groups: Base first, then Ondo groups, then others
  var groupOrder = ['Base', 'Ondo Stocks', 'Ondo ETFs', 'Ondo Currency', 'Other'];
  
  for (var g = 0; g < groupOrder.length; g++) {
    var groupName = groupOrder[g];
    if (!groups[groupName]) continue;
    
    var optgroup = document.createElement('optgroup');
    optgroup.label = groupName;
    
    var groupTokens = groups[groupName];
    for (var j = 0; j < groupTokens.length; j++) {
      var opt = document.createElement('option');
      opt.value = groupTokens[j].index;
      
      // Display format: symbol - name (for Ondo tokens)
      if (groupTokens[j].token.name) {
        opt.textContent = groupTokens[j].token.sym + ' - ' + groupTokens[j].token.name;
      } else {
        opt.textContent = groupTokens[j].token.sym;
      }
      
      optgroup.appendChild(opt);
    }
    
    selectEl.appendChild(optgroup);
  }
}
    function getNamespaceString(chain) {
      return chain.ns + ':' + chain.chainId;
    }

    function getAssetString(token, context) {
      if (token.type === 'native') {
        if (context === 'swap') return 'native';
        if (context === 'buy') return 'slip44:' + token.addr;
      }
      if (token.type === 'slip44') return 'slip44:' + token.addr;
      if (token.type === 'erc20') return 'erc20:' + token.addr;
      if (token.type === 'spl') return 'spl:' + token.addr;
      if (token.type === 'trc20') return 'trc20:' + token.addr;
      return '';
    }

    function clearQr(containerId) {
      var container = getEl(containerId);
      if (container) {
        container.innerHTML = '';
      }
    }

    function renderQr(containerId, wrapId, text) {
      var container = getEl(containerId);
      var wrap = getEl(wrapId);
      if (!container || !wrap) return;

      if (!text) {
        clearQr(containerId);
        wrap.classList.remove('show');
        return;
      }

      wrap.classList.add('show');
      container.innerHTML = '';

      try {
        new QRCode(container, {
          text: text,
          width: 196,
          height: 196,
          colorDark: '#000000',
          colorLight: '#ffffff',
          correctLevel: QRCode.CorrectLevel.M
        });
      } catch (e) {
        console.error('QR Exception:', e);
        showToast('QR generation failed');
      }
    }

    // ===== PRICE API =====
    async function fetchCryptoPrice(coingeckoId) {
      try {
        var now = Date.now();
        if (priceCache[coingeckoId] && (now - priceCache[coingeckoId].timestamp < cacheTimeout)) {
          return priceCache[coingeckoId].price;
        }

        var apiUrl = 'https://api.coingecko.com/api/v3/simple/price?ids=' + coingeckoId + '&vs_currencies=usd';
        var response = await fetch(apiUrl);
        
        if (!response.ok) {
          throw new Error('Price fetch failed');
        }
        
        var data = await response.json();
        
        if (data && data[coingeckoId] && data[coingeckoId].usd) {
          var price = data[coingeckoId].usd;
          priceCache[coingeckoId] = {
            price: price,
            timestamp: now
          };
          return price;
        } else {
          throw new Error('Price not found');
        }
      } catch (error) {
        console.error('Price fetch error:', error);
        return null;
      }
    }

    function convertUsdToCrypto(usdAmount, cryptoPrice) {
      if (!cryptoPrice || cryptoPrice === 0) return null;
      return usdAmount / cryptoPrice;
    }

    function convertCryptoToUsd(cryptoAmount, cryptoPrice) {
      if (!cryptoPrice) return null;
      return cryptoAmount * cryptoPrice;
    }

    // ===== POLYMARKET API =====
    function extractSlugFromUrl(url) {
      try {
        var cleanUrl = url.trim();
        
        if (cleanUrl.includes('polymarket.com/event/')) {
          var parts = cleanUrl.split('/event/');
          if (parts.length > 1) {
            var slug = parts[1].split('?')[0].split('#')[0].replace(/\/$/, '');
            return slug;
          }
        }
        
        if (!cleanUrl.includes('/') && !cleanUrl.includes('http')) {
          return cleanUrl;
        }
        
        throw new Error('Invalid URL format');
      } catch (error) {
        throw new Error('Could not extract slug from URL');
      }
    }

    async function fetchMarketId(slug) {
      try {
        var cleanSlug = slug.trim();
        
        var apiUrl = 'https://gamma-api.polymarket.com/events?slug=' + encodeURIComponent(cleanSlug);
        var proxyUrl = 'https://api.allorigins.win/raw?url=' + encodeURIComponent(apiUrl);
        
        var response = await fetch(proxyUrl);
        
        if (!response.ok) {
          throw new Error('API request failed');
        }
        
        var data = await response.json();
        
        if (data && data.length > 0 && data[0].id) {
          return { 
            id: data[0].id, 
            title: data[0].title || cleanSlug,
            slug: cleanSlug 
          };
        } else {
          throw new Error('Market not found');
        }
      } catch (error) {
        console.error('Polymarket API Error:', error);
        throw error;
      }
    }

    // ===== HOME =====
    function initHome() {
      var genBtn = getEl('homeGenerateBtn');
      var copyBtn = getEl('homeCopyBtn');
      var qrBtn = getEl('homeQrBtn');
      var resetBtn = getEl('homeResetBtn');
      var output = getEl('homeOutput');

      genBtn.addEventListener('click', function() {
        var url = 'https://link.metamask.io/home';
        output.textContent = url;
        output.classList.add('has-content');
        renderQr('homeQrContainer', 'homeQrWrap', url);
        showToast('Home deeplink generated!');
      });

      copyBtn.addEventListener('click', function() { copyText(output.textContent); });

      qrBtn.addEventListener('click', function() {
        var url = output.textContent || '';
        if (!url) { showToast('Generate a link first'); return; }
        renderQr('homeQrContainer', 'homeQrWrap', url);
        showToast('QR ready');
      });

      resetBtn.addEventListener('click', function() {
        output.textContent = '';
        output.classList.remove('has-content');
        renderQr('homeQrContainer', 'homeQrWrap', '');
        showToast('Reset!');
      });
    }

    // ===== SWAP =====
    function initSwap() {
      var fromChain = getEl('fromChainSelect');
      var fromToken = getEl('fromTokenSelect');
      var toChain = getEl('toChainSelect');
      var toToken = getEl('toTokenSelect');
      var amountInput = getEl('amountInput');
      var baseDisplay = getEl('baseUnitsDisplay');
      var currencyToggle = getEl('swapCurrencyToggle');
      var conversionInfo = getEl('swapConversionInfo');
      var genBtn = getEl('swapGenerateBtn');
      var copyBtn = getEl('swapCopyBtn');
      var qrBtn = getEl('swapQrBtn');
      var resetBtn = getEl('swapResetBtn');
      var output = getEl('swapOutput');

      var isUsdMode = false;

      populateChains(fromChain);
      populateChains(toChain);

      fromChain.value = 'ethereum';
      toChain.value = 'polygon';

      populateTokens(fromToken, fromChain.value);
      populateTokens(toToken, toChain.value);

      // Check if mUSD is selected and disable USD mode
      function checkMusdSelected() {
        var ftTokens = TOKENS[fromChain.value] || [];
        var ftIdx = parseInt(fromToken.value);
        if (!isNaN(ftIdx) && ftTokens[ftIdx] && ftTokens[ftIdx].sym === 'mUSD') {
          // mUSD selected - force crypto mode
          if (isUsdMode) {
            isUsdMode = false;
            currencyToggle.textContent = 'USD';
            amountInput.placeholder = 'e.g., 1.5';
            conversionInfo.textContent = '';
            amountInput.value = '';
          }
          currencyToggle.disabled = true;
          currencyToggle.style.opacity = '0.5';
          currencyToggle.style.cursor = 'not-allowed';
          conversionInfo.textContent = 'mUSD: Crypto amounts only';
          conversionInfo.style.color = 'var(--mm-orange)';
        } else {
          currencyToggle.disabled = false;
          currencyToggle.style.opacity = '1';
          currencyToggle.style.cursor = 'pointer';
          if (!isUsdMode) {
            conversionInfo.textContent = '';
            conversionInfo.style.color = '#718096';
          }
        }
      }

      fromChain.addEventListener('change', function() {
        populateTokens(fromToken, fromChain.value);
        checkMusdSelected();
      });

      fromToken.addEventListener('change', function() {
        checkMusdSelected();
        amountInput.value = '';
        conversionInfo.textContent = '';
      });

      toChain.addEventListener('change', function() {
        populateTokens(toToken, toChain.value);
      });

      currencyToggle.addEventListener('click', function() {
        if (currencyToggle.disabled) return;
        
        isUsdMode = !isUsdMode;
        currencyToggle.textContent = isUsdMode ? 'Crypto' : 'USD';
        amountInput.placeholder = isUsdMode ? 'e.g., 100 (USD)' : 'e.g., 1.5';
        conversionInfo.textContent = '';
        amountInput.value = '';
      });

      amountInput.addEventListener('input', async function() {
        if (!amountInput.value || !isUsdMode) {
          if (!isUsdMode) {
            var ftTokens = TOKENS[fromChain.value] || [];
            var ftIdx = parseInt(fromToken.value);
            if (!isNaN(ftIdx) && ftTokens[ftIdx] && ftTokens[ftIdx].sym === 'mUSD') {
              conversionInfo.textContent = 'mUSD: Crypto amounts only';
              conversionInfo.style.color = 'var(--mm-orange)';
              return;
            }
          }
          conversionInfo.textContent = '';
          return;
        }

        var ftTokens = TOKENS[fromChain.value] || [];
        var ftIdx = parseInt(fromToken.value);
        if (isNaN(ftIdx) || !ftTokens[ftIdx] || !ftTokens[ftIdx].coingeckoId) {
          conversionInfo.textContent = '';
          return;
        }

        var token = ftTokens[ftIdx];
        conversionInfo.textContent = 'Fetching price...';
        
        var price = await fetchCryptoPrice(token.coingeckoId);
        if (price) {
          var cryptoAmount = convertUsdToCrypto(parseFloat(amountInput.value), price);
          if (cryptoAmount) {
            conversionInfo.textContent = '‚âà ' + cryptoAmount.toFixed(6) + ' ' + token.sym + ' ($' + price.toLocaleString() + ' per ' + token.sym + ')';
            conversionInfo.style.color = '#718096';
          }
        } else {
          conversionInfo.textContent = 'Price unavailable';
        }
      });

      genBtn.addEventListener('click', async function() {
        var fc = getChain(fromChain.value);
        var tc = getChain(toChain.value);
        if (!fc || !tc) { showToast('Please select valid chains'); return; }

        var ftTokens = TOKENS[fromChain.value] || [];
        var ttTokens = TOKENS[toChain.value] || [];

        var ftIdx = parseInt(fromToken.value);
        var ttIdx = parseInt(toToken.value);

        if (isNaN(ftIdx) || isNaN(ttIdx) || !ftTokens[ftIdx] || !ttTokens[ttIdx]) {
          showToast('Please select valid tokens');
          return;
        }

        var ft = ftTokens[ftIdx];
        var tt = ttTokens[ttIdx];

        var fromNs = getNamespaceString(fc);
        var toNs = getNamespaceString(tc);

        var fromAsset = getAssetString(ft, 'swap');
        var toAsset = getAssetString(tt, 'swap');

        if (!fromAsset || !toAsset) {
          showToast('Invalid asset format for selected tokens');
          return;
        }

        var params = [];
        
        var amt = amountInput.value;
        if (amt && parseFloat(amt) > 0) {
          var actualAmount = amt;
          
          // Skip USD conversion for mUSD
          if (isUsdMode && ft.sym !== 'mUSD' && ft.coingeckoId) {
            var price = await fetchCryptoPrice(ft.coingeckoId);
            if (price) {
              actualAmount = convertUsdToCrypto(parseFloat(amt), price);
            } else {
              showToast('Could not fetch price. Try crypto mode.');
              return;
            }
          }
          
          var base = toBaseUnits(actualAmount, ft.dec);
          if (!base) { showToast('Invalid amount'); return; }
          baseDisplay.value = base;
          params.push('amount=' + encodeURIComponent(base));
        } else {
          baseDisplay.value = '';
        }

        params.push('from=' + encodeURIComponent(fromNs + '/' + fromAsset));
        params.push('to=' + encodeURIComponent(toNs + '/' + toAsset));

        var url = 'https://link.metamask.io/swap?' + params.join('&');

        output.textContent = url;
        output.classList.add('has-content');
        renderQr('swapQrContainer', 'swapQrWrap', url);
        showToast('Swap deeplink generated!');
      });

      copyBtn.addEventListener('click', function() { copyText(output.textContent); });

      qrBtn.addEventListener('click', function() {
        var url = output.textContent || '';
        if (!url) { showToast('Generate a link first'); return; }
        renderQr('swapQrContainer', 'swapQrWrap', url);
        showToast('QR ready');
      });

      resetBtn.addEventListener('click', function() {
        fromChain.value = 'ethereum';
        toChain.value = 'polygon';
        populateTokens(fromToken, 'ethereum');
        populateTokens(toToken, 'polygon');
        amountInput.value = '';
        baseDisplay.value = '';
        conversionInfo.textContent = '';
        isUsdMode = false;
        currencyToggle.textContent = 'USD';
        currencyToggle.disabled = false;
        currencyToggle.style.opacity = '1';
        currencyToggle.style.cursor = 'pointer';
        output.textContent = '';
        output.classList.remove('has-content');
        renderQr('swapQrContainer', 'swapQrWrap', '');
        showToast('Reset!');
      });

      // Initial check
      checkMusdSelected();
    }

    // ===== BUY =====
    function initBuy() {
      var chainSelect = getEl('buyChainSelect');
      var tokenSelect = getEl('buyTokenSelect');
      var amountInput = getEl('buyAmountInput');
      var currencyToggle = getEl('buyCurrencyToggle');
      var conversionInfo = getEl('buyConversionInfo');
      var genBtn = getEl('buyGenerateBtn');
      var copyBtn = getEl('buyCopyBtn');
      var qrBtn = getEl('buyQrBtn');
      var resetBtn = getEl('buyResetBtn');
      var output = getEl('buyOutput');

      var isUsdMode = false;

      populateChains(chainSelect);
      chainSelect.value = 'ethereum';
      populateTokens(tokenSelect, chainSelect.value);

      chainSelect.addEventListener('change', function() {
        populateTokens(tokenSelect, chainSelect.value);
      });

      currencyToggle.addEventListener('click', function() {
        isUsdMode = !isUsdMode;
        currencyToggle.textContent = isUsdMode ? 'Crypto' : 'USD';
        amountInput.placeholder = isUsdMode ? 'e.g., 100 (USD)' : 'e.g., 5';
        conversionInfo.textContent = '';
        amountInput.value = '';
      });

      amountInput.addEventListener('input', async function() {
        if (!amountInput.value || !isUsdMode) {
          conversionInfo.textContent = '';
          return;
        }

        var tokens = TOKENS[chainSelect.value] || [];
        var tokenIdx = parseInt(tokenSelect.value);
        if (isNaN(tokenIdx) || !tokens[tokenIdx] || !tokens[tokenIdx].coingeckoId) {
          conversionInfo.textContent = '';
          return;
        }

        var token = tokens[tokenIdx];
        conversionInfo.textContent = 'Fetching price...';
        
        var price = await fetchCryptoPrice(token.coingeckoId);
        if (price) {
          var cryptoAmount = convertUsdToCrypto(parseFloat(amountInput.value), price);
          if (cryptoAmount) {
            conversionInfo.textContent = '‚âà ' + cryptoAmount.toFixed(6) + ' ' + token.sym + ' ($' + price.toLocaleString() + ' per ' + token.sym + ')';
          }
        } else {
          conversionInfo.textContent = 'Price unavailable';
        }
      });

      genBtn.addEventListener('click', async function() {
        var chain = getChain(chainSelect.value);
        if (!chain) { showToast('Please select a valid chain'); return; }

        var tokens = TOKENS[chainSelect.value] || [];
        var tokenIdx = parseInt(tokenSelect.value);
        
        if (isNaN(tokenIdx) || !tokens[tokenIdx]) {
          showToast('Please select a valid token');
          return;
        }

        var token = tokens[tokenIdx];
        var ns = getNamespaceString(chain);
        var asset = getAssetString(token, 'buy');

        if (!asset) {
          showToast('Invalid asset format');
          return;
        }

        var params = [];

        var amt = amountInput.value;
        if (amt && parseFloat(amt) > 0) {
          var actualAmount = amt;
          
          if (isUsdMode && token.coingeckoId) {
            var price = await fetchCryptoPrice(token.coingeckoId);
            if (price) {
              actualAmount = convertUsdToCrypto(parseFloat(amt), price);
            } else {
              showToast('Could not fetch price. Try crypto mode.');
              return;
            }
          }
          
          params.push('amount=' + encodeURIComponent(actualAmount));
        }

        params.push('assetId=' + encodeURIComponent(ns + '/' + asset));

        var url = 'https://link.metamask.io/buy?' + params.join('&');

        output.textContent = url;
        output.classList.add('has-content');
        renderQr('buyQrContainer', 'buyQrWrap', url);
        showToast('Buy deeplink generated!');
      });

      copyBtn.addEventListener('click', function() { copyText(output.textContent); });

      qrBtn.addEventListener('click', function() {
        var url = output.textContent || '';
        if (!url) { showToast('Generate a link first'); return; }
        renderQr('buyQrContainer', 'buyQrWrap', url);
        showToast('QR ready');
      });

      resetBtn.addEventListener('click', function() {
        chainSelect.value = 'ethereum';
        populateTokens(tokenSelect, 'ethereum');
        amountInput.value = '';
        conversionInfo.textContent = '';
        isUsdMode = false;
        currencyToggle.textContent = 'USD';
        output.textContent = '';
        output.classList.remove('has-content');
        renderQr('buyQrContainer', 'buyQrWrap', '');
        showToast('Reset!');
      });
    }

    // ===== PREDICT =====
    function initPredict() {
      var urlInput = getEl('predictUrlInput');
      var idInput = getEl('predictIdInput');
      var resultDiv = getEl('predictResult');
      var genBtn = getEl('predictGenerateBtn');
      var copyBtn = getEl('predictCopyBtn');
      var qrBtn = getEl('predictQrBtn');
      var resetBtn = getEl('predictResetBtn');
      var output = getEl('predictOutput');

      genBtn.addEventListener('click', async function() {
        var urlOrSlug = urlInput.value.trim();
        var directId = idInput.value.trim();

        if (directId) {
          var url = 'https://link.metamask.io/predict?marketId=' + encodeURIComponent(directId);
          output.textContent = url;
          output.classList.add('has-content');
          renderQr('predictQrContainer', 'predictQrWrap', url);
          resultDiv.innerHTML = '<strong>Using Market ID:</strong> ' + directId;
          resultDiv.classList.add('show');
          showToast('Predict deeplink generated!');
          return;
        }

        if (!urlOrSlug) {
          showToast('Please enter a Polymarket URL or Market ID');
          return;
        }

        genBtn.disabled = true;
        genBtn.innerHTML = '<span class="loading"></span> Fetching...';
        resultDiv.classList.remove('show');

        try {
          var slug = extractSlugFromUrl(urlOrSlug);
          
          resultDiv.innerHTML = '<strong>Extracted Slug:</strong> ' + slug + '<br><span class="loading"></span> Fetching market data...';
          resultDiv.classList.add('show');

          var marketData = await fetchMarketId(slug);
          
          resultDiv.innerHTML = '<strong>Market Found!</strong><br>' +
                               '<strong>Title:</strong> ' + marketData.title + '<br>' +
                               '<strong>Slug:</strong> ' + marketData.slug + '<br>' +
                               '<strong>ID:</strong> ' + marketData.id;
          resultDiv.classList.add('show');

          var url = 'https://link.metamask.io/predict?marketId=' + encodeURIComponent(marketData.id);
          output.textContent = url;
          output.classList.add('has-content');
          renderQr('predictQrContainer', 'predictQrWrap', url);
          showToast('Predict deeplink generated!');
        } catch (error) {
          showToast('Failed to generate deeplink');
          var errorMsg = '<strong>Error:</strong> ' + error.message + '<br><br>';
          
          if (error.message === 'Could not extract slug from URL') {
            errorMsg += '<strong>Tip:</strong> Make sure you paste the full URL like:<br>' +
                       '<code>https://polymarket.com/event/your-market-slug</code>';
          } else {
            errorMsg += '<strong>Manual steps:</strong><br>' +
                       '1. Extract the slug from your URL (the part after /event/)<br>' +
                       '2. Visit <code>https://gamma-api.polymarket.com/events?slug=YOUR-SLUG</code><br>' +
                       '3. Find the "id" field in the response<br>' +
                       '4. Enter it in the Market ID field above';
          }
          
          resultDiv.innerHTML = errorMsg;
          resultDiv.classList.add('show');
        } finally {
          genBtn.disabled = false;
          genBtn.textContent = 'Generate';
        }
      });

      copyBtn.addEventListener('click', function() { copyText(output.textContent); });

      qrBtn.addEventListener('click', function() {
        var url = output.textContent || '';
        if (!url) { showToast('Generate a link first'); return; }
        renderQr('predictQrContainer', 'predictQrWrap', url);
        showToast('QR ready');
      });

      resetBtn.addEventListener('click', function() {
        urlInput.value = '';
        idInput.value = '';
        output.textContent = '';
        output.classList.remove('has-content');
        resultDiv.classList.remove('show');
        resultDiv.innerHTML = '';
        renderQr('predictQrContainer', 'predictQrWrap', '');
        showToast('Reset!');
      });
    }

    // ===== INIT =====
    document.addEventListener('DOMContentLoaded', function() {
      setTimeout(function() {
        if (typeof QRCode !== 'undefined') {
          initHome();
          initSwap();
          initBuy();
          initPredict();
        } else {
          console.error('QRCode library failed to load');
          showToast('QR functionality unavailable');
        }
      }, 100);
    });
  </script>
</body>
</html>
